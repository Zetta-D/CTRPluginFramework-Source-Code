/* This file has been generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2017 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

int getHeapStart();
void *getHeapEnd();
int getHeapLimit();
int getMemUsed();
int getMemFree();
// void *sbrk(intptr_t delta);
// struct mallinfo *mallinfo(struct mallinfo *__return_ptr __struct_ptr retstr);

//-------------------------------------------------------------------------
// Data declarations

// extern _UNKNOWN fake_heap_start; weak
// extern _UNKNOWN fake_heap_end; weak


//----- (00000004) --------------------------------------------------------
int getHeapStart()
{
  return fake_heap_start;
}

//----- (00000014) --------------------------------------------------------
void *getHeapEnd()
{
  return sbrk(0);
}

//----- (0000001C) --------------------------------------------------------
int getHeapLimit()
{
  return fake_heap_end;
}

//----- (0000002C) --------------------------------------------------------
int getMemUsed()
{
  int v1; // [sp+0h] [bp-30h]
  int v2; // [sp+1Ch] [bp-14h]

  mallinfo((struct mallinfo *)&v1);
  return v2;
}

//----- (00000048) --------------------------------------------------------
int getMemFree()
{
  int v0; // r5
  int v1; // r4
  int v3; // [sp+0h] [bp-38h]
  int v4; // [sp+20h] [bp-18h]

  mallinfo((struct mallinfo *)&v3);
  v0 = v4;
  v1 = fake_heap_end;
  return v1 - (_DWORD)getHeapEnd() + v0;
}

// ALL OK, 5 function(s) have been successfully decompiled
