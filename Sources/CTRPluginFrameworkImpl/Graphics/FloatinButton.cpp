/* This file has been generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2017 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

int __fastcall CTRPluginFramework::FloatingButton::Draw(int result);
int __fastcall CTRPluginFramework::FloatingButton::operator()(int a1);
CTRPluginFramework::FloatingButton *__fastcall CTRPluginFramework::FloatingButton::~FloatingButton(CTRPluginFramework::FloatingButton *this);
int __fastcall CTRPluginFramework::FloatingButton::Update(int result, int a2, int *a3);
_DWORD *__fastcall CTRPluginFramework::FloatingButton::FloatingButton(_DWORD *a1, int *a2, int a3);
// void __cdecl operator delete(void *); idb

//-------------------------------------------------------------------------
// Data declarations

_DWORD (__fastcall *off_24C[2])(CTRPluginFramework::FloatingButton *__hidden this) =
{
  &CTRPluginFramework::FloatingButton::~FloatingButton,
  &CTRPluginFramework::FloatingButton::~FloatingButton
}; // weak


//----- (00000008) --------------------------------------------------------
int __fastcall CTRPluginFramework::FloatingButton::Draw(int result)
{
  int (__fastcall *v1)(_DWORD, _DWORD); // r3

  v1 = *(int (__fastcall **)(_DWORD, _DWORD))(result + 4);
  if ( v1 )
    result = v1(*(_QWORD *)(result + 8), *(_QWORD *)(result + 8) >> 32);
  return result;
}

//----- (0000001C) --------------------------------------------------------
int __fastcall CTRPluginFramework::FloatingButton::operator()(int a1)
{
  int v1; // r3
  int result; // r0

  v1 = a1;
  result = *(unsigned __int8 *)(a1 + 33);
  *(_BYTE *)(v1 + 33) = 0;
  return result;
}

//----- (00000030) --------------------------------------------------------
CTRPluginFramework::FloatingButton *__fastcall CTRPluginFramework::FloatingButton::~FloatingButton(CTRPluginFramework::FloatingButton *this)
{
  CTRPluginFramework::FloatingButton *v1; // r4

  v1 = this;
  operator delete((void *)this);
  return v1;
}

//----- (00000044) --------------------------------------------------------
int __fastcall CTRPluginFramework::FloatingButton::Update(int result, int a2, int *a3)
{
  int v3; // r3
  int v4; // r1
  int v5; // r12
  int *v6; // r0
  int v7; // r1
  bool v8; // nf
  unsigned __int8 v9; // vf
  int *v10; // r2
  int v11; // lr
  int v12; // r1
  int v13; // r4
  _BOOL4 v14; // lr
  int v15; // r4
  int v16; // lr
  int v17; // r1
  int v18; // r5
  _BOOL4 v19; // r12
  int v20; // r1
  int *v21; // r12
  char v22; // r2
  int v23; // r2
  int v24; // r2
  int v25; // lr
  char v26; // r2
  int v27; // [sp+4h] [bp-1Ch]
  int v28; // [sp+8h] [bp-18h]
  int v29; // [sp+Ch] [bp-14h]

  v3 = result;
  if ( a2 )
  {
    result = *a3;
    v4 = *(_DWORD *)(v3 + 16);
    v5 = *(_DWORD *)(v3 + 20);
    if ( *(_BYTE *)(v3 + 34) )
    {
      v27 = result - v4 / 2;
      v28 = 0;
      if ( v27 >= 0 )
        v6 = &v27;
      else
        v6 = &v28;
      v7 = 319 - v4;
      v9 = __OFSUB__(v7, *v6);
      v8 = v7 - *v6 < 0;
      v29 = v7;
      if ( v8 ^ v9 )
        v6 = &v29;
      *(_DWORD *)(v3 + 8) = *v6;
      v27 = a3[1] - v5 / 2;
      v28 = 0;
      if ( v27 >= 0 )
        v10 = &v27;
      else
        v10 = &v28;
      result = *v10;
      v9 = __OFSUB__(239 - v5, *v10);
      v8 = 239 - v5 - *v10 < 0;
      v29 = 239 - v5;
      if ( v8 ^ v9 )
        v10 = &v29;
      *(_DWORD *)(v3 + 12) = *v10;
      return result;
    }
    v11 = *(_DWORD *)(v3 + 8);
    v12 = v11 + v4;
    if ( v11 >= v12 )
    {
      v13 = v12;
      v12 = *(_DWORD *)(v3 + 8);
    }
    else
    {
      v13 = *(_DWORD *)(v3 + 8);
    }
    v14 = v13 <= result;
    if ( v12 <= result )
      v14 = 0;
    if ( !v14 )
      goto LABEL_47;
    v15 = *(_DWORD *)(v3 + 12);
    v16 = a3[1];
    v17 = v5 + v15;
    if ( v15 < v5 + v15 )
      v18 = *(_DWORD *)(v3 + 12);
    else
      v18 = v5 + v15;
    if ( v15 >= v5 + v15 )
      v17 = *(_DWORD *)(v3 + 12);
    v19 = v16 >= v18;
    if ( v16 >= v17 )
      v19 = 0;
    if ( !v19 )
    {
LABEL_47:
      v22 = 0;
      *(_BYTE *)(v3 + 32) = 0;
LABEL_32:
      *(_BYTE *)(v3 + 34) = v22;
      return result;
    }
    if ( !*(_BYTE *)(v3 + 32) )
    {
      result = *a3;
      v20 = a3[1];
      v21 = (int *)(v3 + 24);
      *v21 = *a3;
      v21[1] = v20;
      *(_BYTE *)(v3 + 32) = 1;
      return result;
    }
    v23 = *(_DWORD *)(v3 + 24);
    if ( v23 != result )
    {
      result -= v23;
      if ( result < 0 )
        result = -result;
      if ( result > 4 )
        goto LABEL_48;
    }
    v24 = *(_DWORD *)(v3 + 28);
    if ( v24 != v16 )
    {
      v25 = v16 - v24;
      if ( v25 < 0 )
        v25 = -v25;
      if ( v25 > 4 )
      {
LABEL_48:
        v22 = 1;
        goto LABEL_32;
      }
    }
  }
  else
  {
    v26 = *(_BYTE *)(result + 32);
    if ( *(_BYTE *)(result + 32) )
      v26 = *(_BYTE *)(result + 34) ^ 1;
    *(_BYTE *)(result + 33) = v26;
    *(_BYTE *)(result + 32) = 0;
    *(_BYTE *)(result + 34) = 0;
  }
  return result;
}

//----- (00000204) --------------------------------------------------------
_DWORD *__fastcall CTRPluginFramework::FloatingButton::FloatingButton(_DWORD *a1, int *a2, int a3)
{
  int *v3; // lr
  _DWORD *v4; // r12
  int v5; // r0
  int *v6; // t0
  int v7; // r1
  int v8; // r2
  int v9; // r3
  _DWORD *result; // r0

  a1[1] = a3;
  *a1 = off_24C;
  v3 = a1 + 2;
  v4 = a1;
  v5 = *a2;
  v6 = a2 + 1;
  v7 = a2[1];
  ++v6;
  v8 = *v6;
  v9 = v6[1];
  *v3 = v5;
  v3[1] = v7;
  v3[2] = v8;
  v3[3] = v9;
  result = v4;
  v4[6] = 0;
  v4[7] = 0;
  *((_WORD *)v4 + 16) = 0;
  *((_BYTE *)v4 + 34) = 0;
  return result;
}
// 24C: using guessed type _DWORD (__fastcall *off_24C[2])(CTRPluginFramework::FloatingButton *__hidden this);

// ALL OK, 5 function(s) have been successfully decompiled
